# encoding: utf-8
class ServicesController < ApplicationController
	before_filter :authenticate_student!, :except => [:create]

	def index
		# όλες οι υπηρεσίες αυθεντικοποίησης συνδέονται με τον φοιτητή που είναι συνδεδεμένος
		@services = current_student.services.all
	end

	def destroy
		# διαγραφή μιας υπηρεσίας αυθεντικοποίησης που είναι συνδεδεμένη με τον τρέχων φοιτητή
		@service = current_student.services.find(params[:id])
		@service.destroy
		flash[:notice] = "Επιτυχής αποσύνδεση της υπηρεσίας από τον λογαριασμό σας."
		redirect_to services_path
	end

	def create
render :text => request.env["omniauth.auth"].to_yaml
end
end
